!function(e,n,i,s){"use strict";function t(n,i){this.element=n,this.$elem=e(this.element),this.options=e.extend(a,i),this.init()}var l=0,a={resizeWidth:"767",initiallyVisible:!1,collapserTitle:"Main Menu",animSpeed:"medium",easingEffect:null,indentChildren:!1,backToNormal:!1,childrenIndenter:"&nbsp;&nbsp;",expandIcon:"<i>&#9660;</i>",collapseIcon:"<i>&#9650;</i>"};t.prototype={init:function(){var i,s=e(n),t=this.options,l=this.$elem,a='<div class="menu-collapser">'+t.collapserTitle+'<div class="collapse-button"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></div></div>';l.before(a),i=l.prev(".menu-collapser"),l.on("click",".sub-toggle",function(n){n.preventDefault(),n.stopPropagation();var i=e(this).closest("li");e(this).hasClass("expanded")?(e(this).removeClass("expanded").html(t.expandIcon),i.find(">ul").slideUp(t.animSpeed,t.easingEffect)):(e(this).addClass("expanded").html(t.collapseIcon),i.find(">ul").slideDown(t.animSpeed,t.easingEffect))}),i.on("click",".collapse-button",function(e){e.preventDefault(),l.slideToggle(t.animSpeed,t.easingEffect)}),this.resizeMenu(),s.on("resize",this.resizeMenu.bind(this)),s.trigger("resize")},resizeMenu:function(){var i=this,s=e(n).width(),t=this.options,a=e(this.element),d=e("body").find(".menu-collapser");void 0!==n.innerWidth&&n.innerWidth>s&&(s=n.innerWidth),s!=l&&(l=s,a.find("li").each(function(){e(this).has("ul").length&&(e(this).addClass("has-submenu").has(".sub-toggle").length?e(this).children(".sub-toggle").html(t.expandIcon):e(this).addClass("has-submenu").append('<span class="sub-toggle">'+t.expandIcon+"</span>")),e(this).children("ul").hide().end().find(".sub-toggle").removeClass("expanded").html(t.expandIcon)}),t.resizeWidth>=s?(t.indentChildren&&a.find("ul").each(function(){var n=e(this).parents("ul").length;e(this).children("li").children("a").has("i").length||e(this).children("li").children("a").prepend(i.indent(n,t))}),a.addClass("collapsed").find("li").has("ul").off("mouseenter mouseleave"),d.show(),t.initiallyVisible||a.hide()):(t.backToNormal?a.find("li").each(function(){e(this).has("ul").length&&e(this).addClass("has-submenu").has(".sub-toggle").length&&(e(this).removeClass("has-submenu").children(".sub-toggle").remove(),e(this).children("ul").show())}):a.find("li").has("ul").on("mouseenter",function(){e(this).find(">ul").stop().slideDown(t.animSpeed,t.easingEffect)}).on("mouseleave",function(){e(this).find(">ul").stop().slideUp(t.animSpeed,t.easingEffect)}),a.find("li > a > i").remove(),a.removeClass("collapsed").show(),d.hide()))},indent:function(e,n){for(var i=0,s="";i<e;i++)s+=n.childrenIndenter;return"<i>"+s+"</i> "}},e.fn.slimmenu=function(n){return this.each(function(){e.data(this,"plugin_slimmenu")||e.data(this,"plugin_slimmenu",new t(this,n))})}}(jQuery,window,document);
